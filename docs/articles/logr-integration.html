<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Package Integration • logr</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><script src="../extra.js"></script><meta property="og:title" content="Package Integration">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">


    <div class="container template-article">
      <header><div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">logr</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">1.3.9</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"></ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="../articles/logr.html">Get started</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles

    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/logr-parts.html">Log Parts</a>
    </li>
    <li>
      <a href="../articles/logr-features.html">Additional Features</a>
    </li>
    <li>
      <a href="../articles/logr-globals.html">Global Options</a>
    </li>
    <li>
      <a href="../articles/logr-put.html">Aliases for log_print()</a>
    </li>
    <li>
      <a href="../articles/logr-tidylog.html">tidylog Integration</a>
    </li>
    <li>
      <a href="../articles/logr-integration.html">Package Integration</a>
    </li>
    <li>
      <a href="../articles/logr-example1.html">Complete Example</a>
    </li>
    <li>
      <a href="../articles/logr-faq.html">Frequently Asked Questions</a>
    </li>
  </ul>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href=".././articles/logr-faq.html">FAQ</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
<li>
  <a href="https://github.com/dbosak01/logr/" class="external-link">
    <span class="fab fa-github fa-lg"></span>

  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->



      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Package Integration</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/dbosak01/logr/blob/HEAD/vignettes/logr-integration.Rmd" class="external-link"><code>vignettes/logr-integration.Rmd</code></a></small>
      <div class="hidden name"><code>logr-integration.Rmd</code></div>

    </div>

    
    
<p>The <strong>logr</strong> package can be used as a logging system for
R packages. The system is best suited for cases where you need a
complete, SAS®-like log. It has functions to generate errors, warnings,
and informative messages. The log header and footer are produced
automatically. Notes and timestamps are already built in. In short, the
<strong>logr</strong> package takes care of all the tedious details of
logging, and lets you concentrate on documenting key activities and
providing valuable feedback to your user.</p>
<p>There are two types of logging you may want to offer with your custom
R package: direct logging, and indirect logging.</p>
<p>Direct logging means you want your package to create its own log.
Indirect logging means the user of your package will be creating a log,
and you want your package to contribute to the user’s log. Below are
some considerations for each of these two types of logging.</p>
<div class="section level3">
<h3 id="direct-logging">Direct Logging<a class="anchor" aria-label="anchor" href="#direct-logging"></a>
</h3>
<p>To integrate the <strong>logr</strong> package into your custom R
package, take the following steps for direct logging:</p>
<ol style="list-style-type: decimal">
<li>Add <strong>logr</strong> to the “imports” section of your
DESCRIPTION file.</li>
<li>Add the directive “<span class="citation">@import</span> logr” to at
least one roxygen function header.</li>
<li>Add <strong>logr</strong> calls to your functions as desired.</li>
</ol>
<p>For this type of logging, there is normally a “main” or driver
function, which branches to several subroutines. In this case, place the
<code><a href="../reference/log_open.html">log_open()</a></code> and <code><a href="../reference/log_close.html">log_close()</a></code> function calls in
the “main” function. Then place <code><a href="../reference/log_print.html">log_print()</a></code> or
<code><a href="../reference/log_print.html">put()</a></code> calls in the subroutines. The printing functions will
output to the log as expected.</p>
<p>For direct logging, you may also use the <code><a href="../reference/log_error.html">log_error()</a></code>,
<code><a href="../reference/log_warning.html">log_warning()</a></code>, and <code><a href="../reference/log_info.html">log_info()</a></code> functions as
needed. Note that <code><a href="../reference/log_error.html">log_error()</a></code> will not stop execution of
your function calls. It will simply log the appropriate message and keep
going. To stop execution of your function, use the Base R
<code><a href="https://rdrr.io/r/base/stop.html" class="external-link">stop()</a></code> function.</p>
<p>Also note that <code><a href="../reference/log_error.html">log_error()</a></code>, <code><a href="../reference/log_warning.html">log_warning()</a></code>
and <code><a href="../reference/log_info.html">log_info()</a></code> will send messages to the console. This
feature is useful for notifying the user of what is going on with your
package.</p>
</div>
<div class="section level3">
<h3 id="indirect-logging">Indirect Logging<a class="anchor" aria-label="anchor" href="#indirect-logging"></a>
</h3>
<p>For indirect logging, the user will be creating their own log, and
you want your package to write messages to their log.</p>
<p>For example, you may be creating a package of utility functions, and
the user is using your utility functions to write a program. The program
will have the calls to <code><a href="../reference/log_open.html">log_open()</a></code> and
<code><a href="../reference/log_close.html">log_close()</a></code>, but you want your utility functions to send
messages to the program log. This outcome can be achieved with the
logging hook.</p>
<div class="section level4">
<h4 id="logging-hook">Logging Hook<a class="anchor" aria-label="anchor" href="#logging-hook"></a>
</h4>
<p>The <strong>logr</strong> package provides a special function,
<code><a href="../reference/log_print.html">log_hook()</a></code>, specifically designed for logging common
informational messages from a custom package. The function is intended
to be used in cases where you want to send items to the log, but not
send anything to the console. In other words, the
<code><a href="../reference/log_print.html">log_hook()</a></code> function is for when you want to log things
quietly and invisibly.</p>
<p>To use indirect logging, take the following steps:</p>
<ol style="list-style-type: decimal">
<li>Add <strong>logr</strong> to the “imports” or “suggests” section of
your DESCRIPTION file.</li>
<li>Add the directive “<span class="citation">@import</span> logr” to at
least one roxygen function header.</li>
<li>Add <code><a href="../reference/log_print.html">log_hook()</a></code> calls to your functions as desired.</li>
</ol>
<p>When called, the <code><a href="../reference/log_print.html">log_hook()</a></code> function will first check to
see whether the user’s log is open. If open, the function will then
write the message to the user’s log. If a log is not open, the message
will be ignored. This feature is useful to avoid “log not open” warnings
from the <strong>logr</strong> package.</p>
<p>Additionally, the <code><a href="../reference/log_print.html">log_hook()</a></code> function is integrated with
the “autolog” feature. In other words, <code><a href="../reference/log_print.html">log_hook()</a></code> will only
work when “autolog” is turned on. That means the user will be able to
turn off your custom logging messages by turning off “autolog”. This
feature gives the user some control over whether routine messages from
your package are logged or not.</p>
<p>The example below shows a custom function, where the function output
is logged automatically using <code><a href="../reference/log_print.html">log_hook()</a></code>:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#' @title Read an RDS file</span></span>
<span><span class="co">#' @param file_path The path to the file. </span></span>
<span><span class="co">#' @return The RDS file contents as an R object.</span></span>
<span><span class="co">#' @import logr</span></span>
<span><span class="co">#' @export</span></span>
<span><span class="va">read_file</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">file_path</span><span class="op">)</span> <span class="op">{</span></span>
<span>  </span>
<span>  <span class="va">ret</span> <span class="op">&lt;-</span>  <span class="fu"><a href="https://rdrr.io/r/base/readRDS.html" class="external-link">readRDS</a></span><span class="op">(</span><span class="va">file_path</span><span class="op">)</span></span>
<span>  </span>
<span>  <span class="fu"><a href="../reference/log_print.html">log_hook</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">"Read RDS file from '"</span>, <span class="va">file_path</span>, <span class="st">"'"</span><span class="op">)</span><span class="op">)</span></span>
<span>  </span>
<span>  <span class="kw"><a href="https://rdrr.io/r/base/function.html" class="external-link">return</a></span><span class="op">(</span><span class="va">ret</span><span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre></div>
<p>The above function simply reads in an RDS file and returns the
contents to the user. What is different about this function is that it
will record the operation in the user’s log automatically via
<code><a href="../reference/log_print.html">log_hook()</a></code>. This integration allows you to provide
automatic, invisible logging to your users in the most seamless way
possible.</p>
</div>
<div class="section level4">
<h4 id="indirect-logging-of-errors-and-warnings">Indirect Logging of Errors and Warnings<a class="anchor" aria-label="anchor" href="#indirect-logging-of-errors-and-warnings"></a>
</h4>
<p>For indirect logging of errors and warnings, it is recommended to use
the <code><a href="https://rdrr.io/r/base/stop.html" class="external-link">stop()</a></code> and <code><a href="https://rdrr.io/r/base/warning.html" class="external-link">warning()</a></code> Base R functions,
instead of <code><a href="../reference/log_error.html">log_error()</a></code> and <code><a href="../reference/log_warning.html">log_warning()</a></code>. The
logger package will trap these Base R functions, and send the message to
the log. The <code><a href="https://rdrr.io/r/base/stop.html" class="external-link">stop()</a></code> command will also stop execution of
your function. Stopping execution of the function is normally what is
intended when an error occurs.</p>
<p>Next: <a href="logr-example1.html">Complete Example</a></p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

      </div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by David Bosak.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.0.</p>
</div>

      </footer>
</div>






  </body>
</html>
