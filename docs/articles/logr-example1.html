<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Complete Example â€¢ logr</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><script src="../extra.js"></script><meta property="og:title" content="Complete Example">
<meta property="og:description" content="logr">
<meta property="og:image" content="https://logr.r-sassy.org/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">logr</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">1.3.6</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"></ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="../articles/logr.html">Get started</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/logr-parts.html">Log Parts</a>
    </li>
    <li>
      <a href="../articles/logr-features.html">Additional Features</a>
    </li>
    <li>
      <a href="../articles/logr-globals.html">Global Options</a>
    </li>
    <li>
      <a href="../articles/logr-put.html">Aliases for log_print()</a>
    </li>
    <li>
      <a href="../articles/logr-tidylog.html">tidylog Integration</a>
    </li>
    <li>
      <a href="../articles/logr-example1.html">Complete Example</a>
    </li>
    <li>
      <a href="../articles/logr-faq.html">Frequently Asked Questions</a>
    </li>
  </ul>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href=".././articles/logr-faq.html">FAQ</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
<li>
  <a href="https://github.com/dbosak01/logr/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Complete Example</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/dbosak01/logr/blob/HEAD/vignettes/logr-example1.Rmd" class="external-link"><code>vignettes/logr-example1.Rmd</code></a></small>
      <div class="hidden name"><code>logr-example1.Rmd</code></div>

    </div>

    
    
<div class="section level2">
<h2 id="program">Program<a class="anchor" aria-label="anchor" href="#program"></a>
</h2>
<p>The previous examples in the <strong>logr</strong> documentation were
intentionally simplified to focus on the workings of a particular
function. It is helpful, however, to also view <strong>logr</strong>
functions in the context of a complete program. The following example
shows a complete program. The example illustrates how
<strong>logr</strong> functions work together, and interact with
<strong>tidyverse</strong> and <strong>sassy</strong> functions to
create a comprehensive log.</p>
<p>This example has been chosen because it incorporates many of the
functions that will log automatically. If you want to maximize the
auto-generation features of <strong>logr</strong>, take note of these
functions.</p>
<p>The data for this example has been included in the
<strong>logr</strong> package as an external data file. It may be
accessed using the <code><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file()</a></code> function as shown below,
or downloaded directly from the <strong>logr</strong> GitHub site <a href="https://raw.githubusercontent.com/dbosak01/logr/master/inst/extdata/DM.csv" class="external-link">here</a></p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyverse.tidyverse.org" class="external-link">tidyverse</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://r-sassy.org" class="external-link">sassy</a></span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">options</a></span><span class="op">(</span><span class="st">"logr.autolog"</span> <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Get temp location for log and report output</span></span>
<span><span class="va">tmp</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Open the log</span></span>
<span><span class="va">lf</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/log_open.html">log_open</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">tmp</span>, <span class="st">"example1.log"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Send code to the log</span></span>
<span><span class="fu"><a href="../reference/log_code.html">log_code</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="../reference/log_print.html">sep</a></span><span class="op">(</span><span class="st">"Load the data"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Get path to sample data</span></span>
<span><span class="va">pkg</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>, package <span class="op">=</span> <span class="st">"logr"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Define data library</span></span>
<span><span class="fu">libname</span><span class="op">(</span><span class="va">sdtm</span>, <span class="va">pkg</span>, <span class="st">"csv"</span><span class="op">)</span> </span>
<span></span>
<span><span class="co"># Load the library into memory</span></span>
<span><span class="fu">lib_load</span><span class="op">(</span><span class="va">sdtm</span><span class="op">)</span></span>
<span></span>
<span></span>
<span><span class="co"># Prepare Data -------------------------------------------------------------</span></span>
<span><span class="fu"><a href="../reference/log_print.html">sep</a></span><span class="op">(</span><span class="st">"Prepare the data"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Define format for age groups</span></span>
<span><span class="va">ageg</span> <span class="op">&lt;-</span> <span class="fu">value</span><span class="op">(</span><span class="fu">condition</span><span class="op">(</span><span class="va">x</span> <span class="op">&gt;</span> <span class="fl">18</span> <span class="op">&amp;</span> <span class="va">x</span> <span class="op">&lt;=</span> <span class="fl">29</span>, <span class="st">"18 to 29"</span><span class="op">)</span>,</span>
<span>              <span class="fu">condition</span><span class="op">(</span><span class="va">x</span> <span class="op">&gt;=</span> <span class="fl">30</span> <span class="op">&amp;</span> <span class="va">x</span> <span class="op">&lt;=</span> <span class="fl">44</span>, <span class="st">"30 to 44"</span><span class="op">)</span>,</span>
<span>              <span class="fu">condition</span><span class="op">(</span><span class="va">x</span> <span class="op">&gt;=</span> <span class="fl">45</span> <span class="op">&amp;</span> <span class="va">x</span> <span class="op">&lt;=</span> <span class="fl">59</span>, <span class="st">"45 to 59"</span><span class="op">)</span>,</span>
<span>              <span class="fu">condition</span><span class="op">(</span><span class="cn">TRUE</span>, <span class="st">"60+"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span></span>
<span><span class="co"># Manipulate data</span></span>
<span><span class="va">final</span> <span class="op">&lt;-</span> <span class="va">sdtm.DM</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">USUBJID</span>, <span class="va">BRTHDTC</span>, <span class="va">AGE</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>AGEG <span class="op">=</span> <span class="fu">fapply</span><span class="op">(</span><span class="va">AGE</span>, <span class="va">ageg</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html" class="external-link">arrange</a></span><span class="op">(</span><span class="va">AGEG</span>, <span class="va">AGE</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">AGEG</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu">datastep</span><span class="op">(</span>retain <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>SEQ <span class="op">=</span> <span class="fl">0</span><span class="op">)</span>, </span>
<span>           calculate <span class="op">=</span> <span class="op">{</span><span class="va">AGEM</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="va">AGE</span><span class="op">)</span><span class="op">}</span>,</span>
<span>           attrib <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>USUBJID <span class="op">=</span> <span class="fu">dsattr</span><span class="op">(</span>label <span class="op">=</span> <span class="st">"Universal Subject ID"</span><span class="op">)</span>,</span>
<span>                         BRTHDTC <span class="op">=</span> <span class="fu">dsattr</span><span class="op">(</span>label <span class="op">=</span> <span class="st">"Subject Birth Date"</span>, </span>
<span>                                          format <span class="op">=</span> <span class="st">"%m %B %Y"</span><span class="op">)</span>,</span>
<span>                         AGE <span class="op">=</span> <span class="fu">dsattr</span><span class="op">(</span>label <span class="op">=</span> <span class="st">"Subject Age in Years"</span>, </span>
<span>                                      justify <span class="op">=</span> <span class="st">"center"</span><span class="op">)</span>,</span>
<span>                         AGEG <span class="op">=</span> <span class="fu">dsattr</span><span class="op">(</span>label <span class="op">=</span> <span class="st">"Subject Age Group"</span>, </span>
<span>                                       justify <span class="op">=</span> <span class="st">"left"</span><span class="op">)</span>, </span>
<span>                         AGEB <span class="op">=</span> <span class="fu">dsattr</span><span class="op">(</span>label <span class="op">=</span> <span class="st">"Age Group Boundaries"</span><span class="op">)</span>,</span>
<span>                         SEQ <span class="op">=</span> <span class="fu">dsattr</span><span class="op">(</span>label <span class="op">=</span> <span class="st">"Subject Age Group Sequence"</span>, </span>
<span>                                      justify <span class="op">=</span> <span class="st">"center"</span><span class="op">)</span>,</span>
<span>                         AGEM <span class="op">=</span> <span class="fu">dsattr</span><span class="op">(</span>label <span class="op">=</span> <span class="st">"Mean Subject Age"</span>, </span>
<span>                                       format <span class="op">=</span> <span class="st">"%1.2f"</span><span class="op">)</span>,</span>
<span>                         AGEMC <span class="op">=</span> <span class="fu">dsattr</span><span class="op">(</span>label <span class="op">=</span> <span class="st">"Subject Age Mean Category"</span>,</span>
<span>                                        format <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>B <span class="op">=</span> <span class="st">"Below"</span>, A <span class="op">=</span> <span class="st">"Above"</span><span class="op">)</span>, </span>
<span>                                        justify <span class="op">=</span> <span class="st">"right"</span><span class="op">)</span><span class="op">)</span>, </span>
<span>           <span class="op">{</span></span>
<span>             </span>
<span>             <span class="co"># Start and end of Age Groups</span></span>
<span>             <span class="kw">if</span> <span class="op">(</span><span class="va">first.</span> <span class="op">&amp;</span> <span class="va">last.</span><span class="op">)</span></span>
<span>               <span class="va">AGEB</span> <span class="op">&lt;-</span> <span class="st">"Start - End"</span></span>
<span>             <span class="kw">else</span> <span class="kw">if</span> <span class="op">(</span><span class="va">first.</span><span class="op">)</span></span>
<span>               <span class="va">AGEB</span> <span class="op">&lt;-</span> <span class="st">"Start"</span></span>
<span>             <span class="kw">else</span> <span class="kw">if</span> <span class="op">(</span><span class="va">last.</span><span class="op">)</span></span>
<span>               <span class="va">AGEB</span> <span class="op">&lt;-</span> <span class="st">"End"</span></span>
<span>             <span class="kw">else</span> </span>
<span>               <span class="va">AGEB</span> <span class="op">&lt;-</span> <span class="st">"-"</span></span>
<span>             </span>
<span>             <span class="co"># Sequence within Age Groups</span></span>
<span>             <span class="kw">if</span> <span class="op">(</span><span class="va">first.</span><span class="op">)</span></span>
<span>               <span class="va">SEQ</span> <span class="op">&lt;-</span> <span class="fl">1</span></span>
<span>             <span class="kw">else</span> </span>
<span>               <span class="va">SEQ</span> <span class="op">&lt;-</span> <span class="va">SEQ</span> <span class="op">+</span> <span class="fl">1</span></span>
<span>             </span>
<span>             <span class="co"># Above or Below the mean age</span></span>
<span>             <span class="kw">if</span> <span class="op">(</span><span class="va">AGE</span> <span class="op">&gt;</span> <span class="va">AGEM</span><span class="op">)</span></span>
<span>               <span class="va">AGEMC</span> <span class="op">&lt;-</span> <span class="st">"A"</span></span>
<span>             <span class="kw">else</span> </span>
<span>               <span class="va">AGEMC</span> <span class="op">&lt;-</span> <span class="st">"B"</span></span>
<span>             </span>
<span>           <span class="op">}</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">ungroup</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="../reference/log_print.html">put</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Put dictionary to log</span></span>
<span><span class="fu">dictionary</span><span class="op">(</span><span class="va">final</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="../reference/log_print.html">put</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Create Report ------------------------------------------------------------</span></span>
<span><span class="fu"><a href="../reference/log_print.html">sep</a></span><span class="op">(</span><span class="st">"Create report"</span><span class="op">)</span></span>
<span></span>
<span></span>
<span><span class="co"># Create table</span></span>
<span><span class="va">tbl</span> <span class="op">&lt;-</span> <span class="fu">create_table</span><span class="op">(</span><span class="va">final</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Create report</span></span>
<span><span class="va">rpt</span> <span class="op">&lt;-</span> <span class="fu">create_report</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">tmp</span>, <span class="st">"./output/example1.rtf"</span><span class="op">)</span>, </span>
<span>                     output_type <span class="op">=</span> <span class="st">"RTF"</span>, font <span class="op">=</span> <span class="st">"Arial"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu">titles</span><span class="op">(</span><span class="st">"Our first SASSY report"</span>, bold <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu">add_content</span><span class="op">(</span><span class="va">tbl</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># write out the report</span></span>
<span><span class="va">res</span> <span class="op">&lt;-</span> <span class="fu">write_report</span><span class="op">(</span><span class="va">rpt</span><span class="op">)</span></span>
<span></span>
<span></span>
<span><span class="co"># Clean Up -----------------------------------------------------------------</span></span>
<span><span class="fu"><a href="../reference/log_print.html">sep</a></span><span class="op">(</span><span class="st">"Clean Up"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Unload libname</span></span>
<span><span class="fu">lib_unload</span><span class="op">(</span><span class="va">sdtm</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Close the log</span></span>
<span><span class="fu"><a href="../reference/log_close.html">log_close</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># View log</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/writeLines.html" class="external-link">writeLines</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/readLines.html" class="external-link">readLines</a></span><span class="op">(</span><span class="va">lf</span>, encoding <span class="op">=</span> <span class="st">"UTF-8"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># View Report</span></span>
<span><span class="co"># file.show(res$modified_path)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="output">Output<a class="anchor" aria-label="anchor" href="#output"></a>
</h2>
<p>Here is the report produced by the sample program:</p>
<p><img src="../man/images/example1a.png"><img src="../man/images/example1b.png"><img src="../man/images/example1c.png"></p>
</div>
<div class="section level2">
<h2 id="log">Log<a class="anchor" aria-label="anchor" href="#log"></a>
</h2>
<p>The above program produces the following log:</p>
<pre><code>=========================================================================
Log Path: C:/Users/dbosa/AppData/Local/Temp/Rtmp6DW7BF/log/example1.log
Program Path: C:\packages\logr\vignettes\logr-example1.Rmd
Working Directory: C:/packages/logr
User Name: dbosa
R Version: 4.1.2 (2021-11-01)
Machine: SOCRATES x86-64
Operating System: Windows 10 x64 build 19041
Base Packages: stats graphics grDevices utils datasets methods base
Other Packages: tidylog_1.0.2 reporter_1.2.6 libr_1.2.1 fmtr_1.5.3 sassy_1.0.5
                forcats_0.5.1 stringr_1.4.0 purrr_0.3.4 readr_2.0.2 tidyr_1.1.4
                tibble_3.1.5 ggplot2_3.3.5 tidyverse_1.3.1 logr_1.2.7 dplyr_1.0.7
Log Start Time: 2021-11-16 08:40:18
=========================================================================

&gt; library(tidyverse)
&gt; library(sassy)
&gt; 
&gt; options("logr.autolog" = TRUE)
&gt; 
&gt; # Open the log
&gt; lf &lt;- log_open()
&gt; 
&gt; # Send code to the log
&gt; log_code()
&gt; 
&gt; sep("Load the data")
&gt; 
&gt; # Get path to sample data
&gt; pkg &lt;- system.file("extdata", package = "logr")
&gt; 
&gt; # Define data library
&gt; libname(sdtm, pkg, "csv") 
&gt; 
&gt; # Load the library into memory
&gt; lib_load(sdtm)
&gt; 
&gt; 
&gt; # Prepare Data -------------------------------------------------------------
&gt; sep("Prepare the data")
&gt; 
&gt; # Define format for age groups
&gt; ageg &lt;- value(condition(x &gt; 18 &amp; x &lt;= 29, "18 to 29"),
&gt;               condition(x &gt;= 30 &amp; x &lt;= 44, "30 to 44"),
&gt;               condition(x &gt;= 45 &amp; x &lt;= 59, "45 to 59"),
&gt;               condition(TRUE, "60+"))
&gt; 
&gt; 
&gt; # Manipulate data
&gt; final &lt;- sdtm.DM %&gt;% 
&gt;   select(USUBJID, BRTHDTC, AGE) %&gt;% 
&gt;   mutate(AGEG = fapply(AGE, ageg)) %&gt;% 
&gt;   arrange(AGEG, AGE) %&gt;% 
&gt;   group_by(AGEG) %&gt;% 
&gt;   datastep(retain = list(SEQ = 0), 
&gt;            calculate = {AGEM &lt;- mean(AGE)},
&gt;            attrib = list(USUBJID = dsattr(label = "Universal Subject ID"),
&gt;                          BRTHDTC = dsattr(label = "Subject Birth Date", 
&gt;                                           format = "%m %B %Y"),
&gt;                          AGE = dsattr(label = "Subject Age in Years", 
&gt;                                       justify = "center"),
&gt;                          AGEG = dsattr(label = "Subject Age Group", 
&gt;                                        justify = "left"), 
&gt;                          AGEB = dsattr(label = "Age Group Boundaries"),
&gt;                          SEQ = dsattr(label = "Subject Age Group Sequence", 
&gt;                                       justify = "center"),
&gt;                          AGEM = dsattr(label = "Mean Subject Age", 
&gt;                                        format = "%1.2f"),
&gt;                          AGEMC = dsattr(label = "Subject Age Mean Category",
&gt;                                         format = c(B = "Below", A = "Above"), 
&gt;                                         justify = "right")), 
&gt;            {
&gt;              
&gt;              # Start and end of Age Groups
&gt;              if (first. &amp; last.)
&gt;                AGEB &lt;- "Start - End"
&gt;              else if (first.)
&gt;                AGEB &lt;- "Start"
&gt;              else if (last.)
&gt;                AGEB &lt;- "End"
&gt;              else 
&gt;                AGEB &lt;- "-"
&gt;              
&gt;              # Sequence within Age Groups
&gt;              if (first.)
&gt;                SEQ &lt;- 1
&gt;              else 
&gt;                SEQ &lt;- SEQ + 1
&gt;              
&gt;              # Above or Below the mean age
&gt;              if (AGE &gt; AGEM)
&gt;                AGEMC &lt;- "A"
&gt;              else 
&gt;                AGEMC &lt;- "B"
&gt;              
&gt;            }) %&gt;% 
&gt;   ungroup() %&gt;% 
&gt;   put()
&gt; 
&gt; # Put dictionary to log
&gt; dictionary(final) %&gt;% put()
&gt; 
&gt; # Create Report ------------------------------------------------------------
&gt; sep("Create report")
&gt; 
&gt; 
&gt; # Create table
&gt; tbl &lt;- create_table(final)
&gt; 
&gt; # Create report
&gt; rpt &lt;- create_report("./output/example1.rtf", 
&gt;                      output_type = "RTF", font = "Arial") %&gt;% 
&gt;   titles("Our first SASSY report", bold = TRUE) %&gt;% 
&gt;   add_content(tbl)
&gt; 
&gt; # write out the report
&gt; res &lt;- write_report(rpt)
&gt; 
&gt; 
&gt; # Clean Up -----------------------------------------------------------------
&gt; sep("Clean Up")
&gt; 
&gt; # Unload libname
&gt; lib_unload(sdtm)
&gt; 
&gt; # Close the log
&gt; log_close()
&gt; 
&gt; # View log
&gt; writeLines(readLines(lf, encoding = "UTF-8"))
&gt; 
&gt; # View Report
&gt; # file.show(res$modified_path)

=========================================================================
Load the data
=========================================================================

# library 'sdtm': 8 items
- attributes: csv not loaded
- path: C:/Users/dbosa/Documents/R/win-library/4.1/logr/extdata
- items:
  Name Extension Rows Cols     Size        LastModified
1   AE       csv  150   27  88.3 Kb 2021-10-08 15:02:15
2   DA       csv 3587   18 528.1 Kb 2021-10-08 15:02:15
3   DM       csv   87   24  45.4 Kb 2021-10-08 15:02:15
4   DS       csv  174    9  33.9 Kb 2021-10-08 15:02:15
5   EX       csv   84   11  26.2 Kb 2021-10-08 15:02:15
6   IE       csv    2   14  13.2 Kb 2021-10-08 15:02:15
7   SV       csv  685   10  70.2 Kb 2021-10-08 15:02:15
8   VS       csv 3358   17 467.3 Kb 2021-10-08 15:02:15

NOTE: Log Print Time:  2021-11-16 08:40:54
NOTE: Elapsed Time in seconds: 35.2692317962646

lib_load: library 'sdtm' loaded

NOTE: Log Print Time:  2021-11-16 08:41:00
NOTE: Elapsed Time in seconds: 5.96066999435425

=========================================================================
Prepare the data
=========================================================================

select: dropped 21 variables (STUDYID, DOMAIN, SUBJID, RFSTDTC, RFENDTC, &lt;U+0085&gt;)

NOTE: Log Print Time:  2021-11-16 08:41:09
NOTE: Elapsed Time in seconds: 9.39324498176575

mutate: new variable 'AGEG' (character) with 4 unique values and 0% NA

NOTE: Log Print Time:  2021-11-16 08:41:09
NOTE: Elapsed Time in seconds: 0.0129940509796143

group_by: one grouping variable (AGEG)

NOTE: Log Print Time:  2021-11-16 08:41:09
NOTE: Elapsed Time in seconds: 0.0119409561157227

datastep: columns increased from 4 to 8

NOTE: Log Print Time:  2021-11-16 08:41:09
NOTE: Elapsed Time in seconds: 0.0947761535644531

ungroup: no grouping variables

NOTE: Log Print Time:  2021-11-16 08:41:09
NOTE: Elapsed Time in seconds: 0.0029609203338623

# A tibble: 87 x 8
   USUBJID    BRTHDTC      AGE AGEG      AGEM AGEB    SEQ AGEMC
   &lt;chr&gt;      &lt;date&gt;     &lt;dbl&gt; &lt;chr&gt;    &lt;dbl&gt; &lt;chr&gt; &lt;dbl&gt; &lt;chr&gt;
 1 ABC-04-128 1987-05-24    19 18 to 29  49.4 Start     1 B    
 2 ABC-07-011 1985-01-18    21 18 to 29  49.4 -         2 B    
 3 ABC-09-139 1985-11-13    21 18 to 29  49.4 -         3 B    
 4 ABC-09-018 1984-08-29    22 18 to 29  49.4 -         4 B    
 5 ABC-04-074 1983-03-28    23 18 to 29  49.4 -         5 B    
 6 ABC-01-053 1980-04-07    26 18 to 29  49.4 -         6 B    
 7 ABC-06-070 1980-02-01    26 18 to 29  49.4 End       7 B    
 8 ABC-02-112 1976-11-01    30 30 to 44  49.4 Start     1 B    
 9 ABC-01-056 1975-05-02    31 30 to 44  49.4 -         2 B    
10 ABC-03-089 1975-10-02    31 30 to 44  49.4 -         3 B    
# ... with 77 more rows

NOTE: Data frame has 87 rows and 8 columns.

NOTE: Log Print Time:  2021-11-16 08:41:09
NOTE: Elapsed Time in seconds: 0.0398931503295898

# A tibble: 8 x 10
  Name  Column  Class     Label     Description Format  Width Justify  Rows   NAs
  &lt;chr&gt; &lt;chr&gt;   &lt;chr&gt;     &lt;chr&gt;     &lt;chr&gt;       &lt;chr&gt;   &lt;int&gt; &lt;chr&gt;   &lt;int&gt; &lt;int&gt;
1 final USUBJID character Universa~ &lt;NA&gt;         &lt;NA&gt;      10 &lt;NA&gt;       87     0
2 final BRTHDTC Date      Subject ~ &lt;NA&gt;        "%m %B~    NA &lt;NA&gt;       87     0
3 final AGE     numeric   Subject ~ &lt;NA&gt;         &lt;NA&gt;      NA center     87     0
4 final AGEG    character Subject ~ &lt;NA&gt;         &lt;NA&gt;       8 left       87     0
5 final AGEM    numeric   Mean Sub~ &lt;NA&gt;        "%1.2f"    NA &lt;NA&gt;       87     0
6 final AGEB    character Age Grou~ &lt;NA&gt;         &lt;NA&gt;       5 &lt;NA&gt;       87     0
7 final SEQ     numeric   Subject ~ &lt;NA&gt;         &lt;NA&gt;      NA center     87     0
8 final AGEMC   character Subject ~ &lt;NA&gt;        "Below~     1 right      87     0

NOTE: Data frame has 8 rows and 10 columns.

NOTE: Log Print Time:  2021-11-16 08:41:11
NOTE: Elapsed Time in seconds: 2.2303478717804

=========================================================================
Create report
=========================================================================

# A report specification: 3 pages
- file_path: 'C:\Users\dbosa\AppData\Local\Temp\Rtmp6DW7BF/./output/example1.rtf'
- output_type: RTF
- units: inches
- orientation: landscape
- margins: top 0.5 bottom 0.5 left 1 right 1
- line size/count: 9/46
- title 1: 'Our first SASSY report'
- content: 
# A table specification:
- data: tibble 'final' 87 rows 8 cols
- show_cols: all
- use_attributes: all

NOTE: Log Print Time:  2021-11-16 08:41:16
NOTE: Elapsed Time in seconds: 4.57250308990479

=========================================================================
Clean Up
=========================================================================

lib_sync: synchronized data in library 'sdtm'

NOTE: Log Print Time:  2021-11-16 08:41:17
NOTE: Elapsed Time in seconds: 1.38584780693054

lib_unload: library 'sdtm' unloaded

NOTE: Log Print Time:  2021-11-16 08:41:17
NOTE: Elapsed Time in seconds: 0.00399112701416016

=========================================================================
Log End Time: 2021-11-16 08:41:19
Log Elapsed Time: 0 00:00:01
=========================================================================</code></pre>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by David Bosak.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
