<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />

<meta name="viewport" content="width=device-width, initial-scale=1" />

<meta name="author" content="David Bosak" />

<meta name="date" content="2020-06-30" />

<title>Create Logs for R Scripts</title>

<script>// Pandoc 2.9 adds attributes on both header and div. We remove the former (to
// be compatible with the behavior of Pandoc < 2.8).
document.addEventListener('DOMContentLoaded', function(e) {
  var hs = document.querySelectorAll("div.section[class*='level'] > :first-child");
  var i, h, a;
  for (i = 0; i < hs.length; i++) {
    h = hs[i];
    if (!/^h[1-6]$/i.test(h.tagName)) continue;  // it should be a header h1-h6
    a = h.attributes;
    while (a.length > 0) h.removeAttribute(a[0].name);
  }
});
</script>
<script>// Hide empty <a> tag within highlighted CodeBlock for screen reader accessibility (see https://github.com/jgm/pandoc/issues/6352#issuecomment-626106786) -->
// v0.0.1
// Written by JooYoung Seo (jooyoung@psu.edu) and Atsushi Yasumoto on June 1st, 2020.

document.addEventListener('DOMContentLoaded', function() {
  const codeList = document.getElementsByClassName("sourceCode");
  for (var i = 0; i < codeList.length; i++) {
    var linkList = codeList[i].getElementsByTagName('a');
    for (var j = 0; j < linkList.length; j++) {
      if (linkList[j].innerHTML === "") {
        linkList[j].setAttribute('aria-hidden', 'true');
      }
    }
  }
});
</script>





<style type="text/css">body {
background-color: #fff;
margin: 1em auto;
max-width: 700px;
overflow: visible;
padding-left: 2em;
padding-right: 2em;
font-family: "Open Sans", "Helvetica Neue", Helvetica, Arial, sans-serif;
font-size: 14px;
line-height: 1.35;
}
#TOC {
clear: both;
margin: 0 0 10px 10px;
padding: 4px;
width: 400px;
border: 1px solid #CCCCCC;
border-radius: 5px;
background-color: #f6f6f6;
font-size: 13px;
line-height: 1.3;
}
#TOC .toctitle {
font-weight: bold;
font-size: 15px;
margin-left: 5px;
}
#TOC ul {
padding-left: 40px;
margin-left: -1.5em;
margin-top: 5px;
margin-bottom: 5px;
}
#TOC ul ul {
margin-left: -2em;
}
#TOC li {
line-height: 16px;
}
table {
margin: 1em auto;
border-width: 1px;
border-color: #DDDDDD;
border-style: outset;
border-collapse: collapse;
}
table th {
border-width: 2px;
padding: 5px;
border-style: inset;
}
table td {
border-width: 1px;
border-style: inset;
line-height: 18px;
padding: 5px 5px;
}
table, table th, table td {
border-left-style: none;
border-right-style: none;
}
table thead, table tr.even {
background-color: #f7f7f7;
}
p {
margin: 0.5em 0;
}
blockquote {
background-color: #f6f6f6;
padding: 0.25em 0.75em;
}
hr {
border-style: solid;
border: none;
border-top: 1px solid #777;
margin: 28px 0;
}
dl {
margin-left: 0;
}
dl dd {
margin-bottom: 13px;
margin-left: 13px;
}
dl dt {
font-weight: bold;
}
ul {
margin-top: 0;
}
ul li {
list-style: circle outside;
}
ul ul {
margin-bottom: 0;
}
pre, code {
background-color: #f7f7f7;
border-radius: 3px;
color: #333;
white-space: pre-wrap; 
}
pre {
border-radius: 3px;
margin: 5px 0px 10px 0px;
padding: 10px;
}
pre:not([class]) {
background-color: #f7f7f7;
}
code {
font-family: Consolas, Monaco, 'Courier New', monospace;
font-size: 85%;
}
p > code, li > code {
padding: 2px 0px;
}
div.figure {
text-align: center;
}
img {
background-color: #FFFFFF;
padding: 2px;
border: 1px solid #DDDDDD;
border-radius: 3px;
border: 1px solid #CCCCCC;
margin: 0 5px;
}
h1 {
margin-top: 0;
font-size: 35px;
line-height: 40px;
}
h2 {
border-bottom: 4px solid #f7f7f7;
padding-top: 10px;
padding-bottom: 2px;
font-size: 145%;
}
h3 {
border-bottom: 2px solid #f7f7f7;
padding-top: 10px;
font-size: 120%;
}
h4 {
border-bottom: 1px solid #f7f7f7;
margin-left: 8px;
font-size: 105%;
}
h5, h6 {
border-bottom: 1px solid #ccc;
font-size: 105%;
}
a {
color: #0033dd;
text-decoration: none;
}
a:hover {
color: #6666ff; }
a:visited {
color: #800080; }
a:visited:hover {
color: #BB00BB; }
a[href^="http:"] {
text-decoration: underline; }
a[href^="https:"] {
text-decoration: underline; }

code > span.kw { color: #555; font-weight: bold; } 
code > span.dt { color: #902000; } 
code > span.dv { color: #40a070; } 
code > span.bn { color: #d14; } 
code > span.fl { color: #d14; } 
code > span.ch { color: #d14; } 
code > span.st { color: #d14; } 
code > span.co { color: #888888; font-style: italic; } 
code > span.ot { color: #007020; } 
code > span.al { color: #ff0000; font-weight: bold; } 
code > span.fu { color: #900; font-weight: bold; } 
code > span.er { color: #a61717; background-color: #e3d2d2; } 
</style>




</head>

<body>




<h1 class="title toc-ignore">Create Logs for R Scripts</h1>
<h4 class="author">David Bosak</h4>
<h4 class="date">2020-06-30</h4>



<div id="logr" class="section level1">
<h1>logr <img src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiA/PjwhRE9DVFlQRSBzdmcgIFBVQkxJQyAnLS8vVzNDLy9EVEQgU1ZHIDEuMS8vRU4nICAnaHR0cDovL3d3dy53My5vcmcvR3JhcGhpY3MvU1ZHLzEuMS9EVEQvc3ZnMTEuZHRkJz48c3ZnIGlkPSJMYXllcl8xIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA1OTUuMyA1OTUuMzsiIHZlcnNpb249IjEuMSIgdmlld0JveD0iMCAwIDU5NS4zIDU5NS4zIiB4bWw6c3BhY2U9InByZXNlcnZlIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIj48c3R5bGUgdHlwZT0idGV4dC9jc3MiPgoJLnN0MHtmaWxsOiM0MTQwNDI7fQo8L3N0eWxlPjxnPjxnPjxwYXRoIGNsYXNzPSJzdDAiIGQ9Ik00NzcuOSw4MGMtMS44LTcuMS02LjgtMTIuMy0xNC4zLTE1Yy0xOS4yLTctNTMuMiwzLjItODQuNSwyNS4zYy0zNC4yLDI0LjItMTIxLjcsNTUuNi0xNDIuMiw2Mi44ICAgICBsLTUuMy0xMi4yYy0xLjEtMi41LTQtMy43LTYuNi0yLjZMMTYxLjUsMTY2Yy0xLjIsMC41LTIuMiwxLjUtMi43LDIuOGMtMC41LDEuMi0wLjUsMi42LDAuMSwzLjhsMzMuOCw3Ny42ICAgICBjMi45LDYuNi0xLjcsMzAuMi01LjksNDVjLTAuNCwxLjUtMC4xLDMuMSwwLjgsNC40YzAuOSwxLjIsMi40LDIsNCwybDAuOCwwYzQ0LjIsMCw4MS43LTE2LjUsMTExLjQtNDguOSAgICAgYzEuMS0xLjIsMS41LTIuNywxLjItNC4zYy0wLjMtMS41LTEuMy0yLjktMi42LTMuNmMtMTMuNi03LTM0LjEtMTkuNy0zNy0yNi4zbC04LjYtMTkuOGM5LjUtNC4xLDMxLjUtMTMuNSw0Ni4yLTE5LjkgICAgIGM0LjUtMiw5LjMtNSwxNS41LTguN2MxOC4yLTExLjIsNDUuNi0yOC4xLDEwMS42LTQyLjRjMzUuOC05LjEsNTEtMTMuOCw1Ny4xLTI0LjJDNDgxLjMsOTYuNCw0ODAsODgsNDc3LjksODB6IE0xNjkuOSwxNzMuNyAgICAgbDQuNi0ybDkuMywyMS4zbC00LjYsMkwxNjkuOSwxNzMuN3ogTTE4Ni45LDIxMi43bC00LjMtOS45bDQuNi0ybDQuMyw5LjlMMTg2LjksMjEyLjd6IE0yODIuMSwyNDQuOWMzLjYsMi4yLDcsNC4xLDkuOCw1LjcgICAgIGMtMjUuNiwyNS44LTU3LjEsMzkuNi05My43LDQwLjljMC44LTMuMSwxLjctNi45LDIuNS0xMWMxNC4zLTIuNCwyOC43LTYuNiw0Mi45LTEyLjhDMjU3LjgsMjYxLjQsMjcwLjcsMjUzLjcsMjgyLjEsMjQ0Ljl6ICAgICAgTTQ2OC41LDk4LjRjLTQuMyw3LjItMjIuMSwxMi4yLTUwLjksMTkuNmMtNTcuNCwxNC42LTg2LjgsMzIuNy0xMDQuNCw0My42Yy01LjgsMy42LTEwLjQsNi40LTE0LjIsOC4xICAgICBjLTE0LjcsNi40LTM2LjgsMTUuOC00Ni4yLDE5LjlsLTcuOC0xNy45YzE3LjItNCw0OS44LTE2LjUsNjMuMS0yMi45bC0yLjEtNC41Yy0xNC43LDctNDcuNCwxOS4yLTYzLDIyLjdsLTIuMS00LjcgICAgIGMyMi4yLTcuOCwxMDguNi0zOC44LDE0NC02My44YzMzLTIzLjQsNjIuMi0yOC45LDc1LjMtMjQuMWM0LjQsMS42LDcuMSw0LjMsOC4xLDguMkM0NzAuMyw5MC42LDQ3MC40LDk1LjIsNDY4LjUsOTguNHoiLz48Zz48cGF0aCBjbGFzcz0ic3QwIiBkPSJNMjc4LjksMjY2LjVsLTIuOCw5LjZjMjAuNCw2LDMzLjEsMTUsMzMuMSwyMy4zYzAsMTQuNi0zNy43LDMwLjktOTEuOSwzMC45Yy0xMy42LDAtMjcuMS0xLjEtMzkuMy0zLjIgICAgICBjMi43LTQuNyw2LjItMTAuMyw3LjgtMTIuOGMxLjItMS45LDEtNC40LTAuNS02LjFjLTEuNS0xLjctNC0yLjEtNi0xLjFjLTAuMiwwLjEtMTkuMSw5LjctMjcuOCwxMy4zICAgICAgYy0xNi40LTUuOS0yNi4xLTEzLjctMjYuMS0yMWMwLTE0LjYsMzcuNy0zMC45LDkxLjktMzAuOXYtMTBjLTI2LjUsMC01MS40LDMuOC03MC4yLDEwLjhjLTIwLjQsNy42LTMxLjYsMTguMi0zMS42LDMwLjF2MTkyLjIgICAgICBjMCwxMS44LDExLjIsMjIuNSwzMS42LDMwLjFjMTguOCw3LDQzLjgsMTAuOCw3MC4yLDEwLjhjMjYuNSwwLDUxLjQtMy44LDcwLjItMTAuOGMyMC40LTcuNiwzMS42LTE4LjIsMzEuNi0zMC4xVjI5OS40ICAgICAgQzMxOS4yLDI4NS45LDMwNC45LDI3NC4yLDI3OC45LDI2Ni41eiBNMzAzLjcsNTAxLjVWMzg3LjdoLTV2MTE3LjZjLTMsMS45LTYuNiwzLjgtMTAuOCw1LjV2LTg2LjVoLTV2ODguNCAgICAgIGMtMTYuMiw1LjgtMzguOSw5LjgtNjUuNiw5LjhjLTEuMSwwLTIuMSwwLTMuMiwwVjM5Ny44aC01djEyNC42Yy00OS43LTEuNS04My43LTE2LjktODMuNy0zMC44VjMxNy43ICAgICAgYzUuNSw0LjYsMTMuMSw4LjcsMjIuNywxMi4ydjQ0LjdoNXYtNDQuMWMwLjEsMCwwLjEsMCwwLjItMC4xYzMuNS0xLjMsOS40LTQsMTUuMS02LjhjLTEuMSwyLTIsMy44LTIuNiw1LjIgICAgICBjLTAuNiwxLjQtMC41LDIuOSwwLjIsNC4zYzAuNCwwLjgsMS4xLDEuNSwxLjksMnY3Nmg1di03NC43YzEzLjcsMi41LDI4LjksMy45LDQ0LjQsMy45YzI2LjUsMCw1MS40LTMuOCw3MC4yLTEwLjggICAgICBjOS4xLTMuNCwxNi40LTcuNCwyMS42LTExLjh2MTczLjlDMzA5LjIsNDk0LjksMzA3LjMsNDk4LjIsMzAzLjcsNTAxLjV6Ii8+PHBhdGggY2xhc3M9InN0MCIgZD0iTTI3OS42LDI5OS40YzAsNi4xLTIzLjcsMTQuNS02Mi4zLDE0LjVjLTYuNCwwLTEyLjgtMC4zLTE4LjktMC43bC0wLjQsNWM2LjIsMC41LDEyLjcsMC44LDE5LjMsMC44ICAgICAgYzMzLjQsMCw2Ny4zLTYuNyw2Ny4zLTE5LjVjMC05LjUtMTguNi0xNC40LTI5LjctMTYuNEwyNTQsMjg4QzI3MS41LDI5MS4yLDI3OS42LDI5Ni4yLDI3OS42LDI5OS40eiIvPjxwYXRoIGNsYXNzPSJzdDAiIGQ9Ik0xOTQuMiwyODZjMC0xLjcsMC4xLTMuNCwwLjQtNS4xYy0yMi4zLDIuMi00NC41LDgtNDQuNSwxOC41YzAsNCwzLjMsNy42LDkuOCwxMC43bDIuMS00LjUgICAgICBjLTQuMy0yLTYuOS00LjMtNi45LTYuMUMxNTUuMSwyOTUuMywxNjcuNiwyODguNywxOTQuMiwyODZ6Ii8+PHJlY3QgY2xhc3M9InN0MCIgaGVpZ2h0PSI1IiB3aWR0aD0iODEiIHg9IjE1OS4xIiB5PSIyOTYuOSIvPjwvZz48L2c+PC9nPjwvc3ZnPg==" align="right" height="138" /></h1>
<p>The <strong>logr</strong> package helps create log files for R scripts. The package provides easy logging, without the complexity of other logging systems. It is designed for analysts who simply want a written log of the their program execution. The package is designed as a wrapper to the base R <code>sink()</code> function.</p>
<div id="how-to-use" class="section level2">
<h2>How to use</h2>
<p>There are only three <strong>logr</strong> functions:<br />
* <code>log_open()</code> * <code>log_print()</code> * <code>log_close()</code></p>
<p>The <code>log_open()</code> function initiates the log. The <code>log_print()</code> function prints an object to the log. The <code>log_close()</code> function closes the log. In normal situations, a user would place the call to <code>log_open()</code> at the top of the program, call <code>log_print()</code> as needed in the program body, and call <code>log_close()</code> once at the end of the program.</p>
<p>A sample program is as follows:</p>
<pre><code>library(logr)

# Create temp file location
tmp &lt;- file.path(tempdir(), &quot;test.log&quot;)

# Open log
lf &lt;- log_open(tmp)

# Send message to log
log_print(&quot;High Mileage Cars Subset&quot;)

# Perform operations
hmc &lt;- subset(mtcars, mtcars$mpg &gt; 20)

# Print data to log
log_print(hmc)

# Close log
log_close()

# View results
writeLines(readLines(lf))
</code></pre>
</div>
<div id="what-to-print-to-the-log" class="section level2">
<h2>What to print to the log</h2>
<p>You can print to the log anything that you can print to the console; vectors, lists, and data frames are all valid objects for logging. Under the hood, <strong>logr</strong> calls the <code>print()</code> function on that object, and writes the results to the log. The <code>log_print()</code> function, by default, will also print the object to the console. That means you can replace calls to <code>print()</code> with <code>log_print()</code>, and there will be no loss of convenience during development.</p>
</div>
<div id="what-the-log-looks-like" class="section level2">
<h2>What the log looks like</h2>
<p>The log created by <strong>logr</strong> is simpler than most logging packages. This log is designed to be human-readable and increases the traceability of your activities. There are three main enhancements to a <strong>logr</strong> log: * A log header * Notes * A log footer</p>
<p>Here is an example log, created by the sample program above:</p>
<pre><code>========================================================================= 
Log Path: C:/Users/dbosa/AppData/Local/Temp/RtmpQtOzhy/log/test.log 
Working Directory: C:/packages/logr 
User Name: dbosak 
R Version: R Under development (unstable) (2020-06-29 r78751) 
Machine: BOSAK-MAIN x86-64 
Operating System: Windows 10 x64 build 18362 
Log Start Time: 2020-06-30 07:15:52 
========================================================================= 

High Mileage Cars Subset 

NOTE: Log Print Time:  2020-06-30 07:15:52 
NOTE: Elapsed Time in seconds: 0.0219531059265137 

                mpg cyl  disp  hp drat    wt  qsec vs am gear carb
Mazda RX4      21.0   6 160.0 110 3.90 2.620 16.46  0  1    4    4
Mazda RX4 Wag  21.0   6 160.0 110 3.90 2.875 17.02  0  1    4    4
Datsun 710     22.8   4 108.0  93 3.85 2.320 18.61  1  1    4    1
Hornet 4 Drive 21.4   6 258.0 110 3.08 3.215 19.44  1  0    3    1
Merc 240D      24.4   4 146.7  62 3.69 3.190 20.00  1  0    4    2
Merc 230       22.8   4 140.8  95 3.92 3.150 22.90  1  0    4    2
Fiat 128       32.4   4  78.7  66 4.08 2.200 19.47  1  1    4    1
Honda Civic    30.4   4  75.7  52 4.93 1.615 18.52  1  1    4    2
Toyota Corolla 33.9   4  71.1  65 4.22 1.835 19.90  1  1    4    1
Toyota Corona  21.5   4 120.1  97 3.70 2.465 20.01  1  0    3    1
Fiat X1-9      27.3   4  79.0  66 4.08 1.935 18.90  1  1    4    1
Porsche 914-2  26.0   4 120.3  91 4.43 2.140 16.70  0  1    5    2
Lotus Europa   30.4   4  95.1 113 3.77 1.513 16.90  1  1    5    2
Volvo 142E     21.4   4 121.0 109 4.11 2.780 18.60  1  1    4    2

NOTE: Data frame has 14 rows and 11 columns. 

NOTE: Log Print Time:  2020-06-30 07:15:52 
NOTE: Elapsed Time in seconds: 0.0508558750152588 

========================================================================= 
Log End Time: 2020-06-30 07:15:53 
Log Elapsed Time: 0 00:00:00 
========================================================================= </code></pre>
</div>
<div id="parts-of-the-log" class="section level2">
<h2>Parts of the log</h2>
<div id="log-header" class="section level4">
<h4>Log Header</h4>
<p>The log header provides an introduction to your log. The header block contains the path of the log file, the working directory, the name of the user, a date-time stamp, and other useful information concerning the operating environment.</p>
</div>
<div id="notes" class="section level4">
<h4>Notes</h4>
<p>Notes will be written to the log for every call to <code>log_print()</code>. The notes will follow the printing of the object, and will include a date-time stamp and the elapsed time since the last call to <code>log_print()</code>. If the object is of class <code>data.frame</code> the number of rows and columns will also be noted.</p>
</div>
<div id="log-footer" class="section level4">
<h4>Log Footer</h4>
<p>The log footer concludes the log with another date-time stamp for the log end time, and a total elapsed time for the entire script. Note that during batch runs or when sourcing a script, the log footer may not be generated if the script errors. Instead, the last line of the log will be the error message.</p>
</div>
</div>
<div id="additional-features" class="section level2">
<h2>Additional Features</h2>
<div id="errors-and-warnings" class="section level3">
<h3>Errors and Warnings</h3>
<p><strong>logr</strong> will write all errors and the last warning to the log. Errors are written at the point they are encountered. Warnings will be written at the end of the log.</p>
</div>
<div id="message-file-.msg" class="section level3">
<h3>Message File *.msg</h3>
<p>If errors or warnings are generated, they will also be written to a separate file called a message file. The message file has the same name as the log, but with a <em>.msg</em> extension. The purpose of the message file is so that errors and warnings that occur during execution of the script can be observed from the file system. The presence or absence of the <em>.msg</em> file will indicate whether or not the program ran clean.</p>
</div>
<div id="log-subdirectory-log" class="section level3">
<h3>Log subdirectory /log</h3>
<p>By default, <code>logr</code> prints the log to a subdirectory named <em>log</em>. If that subdirectory does not exist, the <code>log_open()</code> function will create it. The default behavior can be overridden by setting the <code>logdir</code> parameter on the <code>log_open()</code> function to <code>FALSE</code>.</p>
</div>
</div>
</div>



<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
